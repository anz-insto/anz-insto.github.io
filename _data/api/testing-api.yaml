openapi: 3.0.1
info:
  title: Fileactive Testing API
  description: Fileactive Self-Service Testing API. Rate limit is one request per second.
  version: v1.0
servers:
  - url: https://api.fileactive.uat.anzgcis.com/testingfileactive/v1.0
    description: 'UAT (non-production) environment'
security:
  - apiKeyAuth: []
paths:
  /rtn:
    post:
      summary: Request A Real Time Notification Submit
      description: |-
        Request includes attributes which will be included in the RTN. All unspecified RTN fields will be defaulted  
      tags:
        - Receivables
      operationId: submitRTNRequest
      externalDocs:
        description: RTN Additional Information
        url: "https://anz-insto.github.io/fileactive/rtn-info.html"  
      parameters:
        - $ref: '#/components/parameters/correlationID'
        - $ref: '#/components/parameters/messageID'
      requestBody:
        description: Request a RTN
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestRTN'
        required: true
      responses:
        '201':
          $ref: '#/components/responses/201Created'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '401':
          $ref: '#/components/responses/401Unauthorised'
        '403':
          $ref: '#/components/responses/403Forbidden'
        '429':
          $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalError'
        '502':
          $ref: '#/components/responses/502BadGateway'
        '503':
          $ref: '#/components/responses/503Unavailable'
        '504':
          $ref: '#/components/responses/504Timeout'
        default:
          $ref: '#/components/responses/default'
  /payto/notifications:
    post:
      tags:
        - PayTo Payee
      summary: Request A Mandate Notification.
      description: |-
        Request includes attributes which will be included in the Mandate Notification. 
      operationId: submitMandateNotificationRequest
      parameters:
        - $ref: '#/components/parameters/correlationID'
        - $ref: '#/components/parameters/messageID'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestMandateNotification'
            examples:
              Mandate Amended:
                value:
                  {
                    "mps_user_id" : "10002005",
                    "trigger" : "MAMN",
                    "mandate_identification" : "247de1c0c3a911edafa10242ac120002",
                    "mandate_status" : "ACTV",
                    "action_identification" : "85f28334c3a911edafa10242ac120002",
                    "action_type" : "AMND",
                    "action_status" : "CMPL"  
                  }
              Mandate Create Confirmed:
                  value:
                    {
                      "mps_user_id" : "10002005",
                      "trigger" : "MCRC",
                      "mandate_identification" : "247de1c0c3a911edafa10242ac120002",
                      "mandate_status" : "ACTV",
                      "action_identification" : "85f28334c3a911edafa10242ac120002",
                      "action_type" : "CREA",
                      "action_status" : "CMPL"  
                    }
              Mandate Create Declined:
                value:
                  {
                    "mps_user_id" : "10002005",
                    "trigger" : "MCRD",
                    "mandate_identification" : "247de1c0c3a911edafa10242ac120002",
                    "mandate_status" : "CNCD",
                    "action_identification" : "85f28334c3a911edafa10242ac120002",
                    "action_type" : "CREA",
                    "action_status" : "DECL"  
                  }
              Mandate Create Expired:
                value:
                  {
                    "mps_user_id" : "10002005",
                    "trigger" : "MCRX",
                    "mandate_identification" : "247de1c0c3a911edafa10242ac120002",
                    "mandate_status" : "CNCD",
                    "action_identification" : "85f28334c3a911edafa10242ac120002",
                    "action_type" : "CREA",
                    "action_status" : "TIMO"  
                  }
              Mandate Status Change:
                value:
                  {
                    "mps_user_id" : "10002005",
                    "trigger" : "MSCH",
                    "mandate_identification" : "247de1c0c3a911edafa10242ac120002",
                    "mandate_status" : "CNCD",
                    "action_identification": "85f28334c3a911edafa10242ac120002",
                    "action_type" : "STCH",
                    "action_status" : "CMPL",
                    "details" : {
                        "status_change" : {
                            "change" : "CNCL",
                            "reason_code" : "MD17",
                            "reason_description" : "RequestedByCustomer"   
                        }
                    }  
                  }    
        required: true
      responses:
        '201':
          $ref: '#/components/responses/201Created'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '401':
          $ref: '#/components/responses/401Unauthorised'
        '403':
          $ref: '#/components/responses/403Forbidden'
        '429':
          $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalError'
        '502':
          $ref: '#/components/responses/502BadGateway'
        '503':
          $ref: '#/components/responses/503Unavailable'
        '504':
          $ref: '#/components/responses/504Timeout'
        default:
          $ref: '#/components/responses/default'       
  /payto/queries:
    post:
      tags:
        - PayTo Payee
      summary: Request A PayTo Query.
      description: |-
        Request includes attributes which will be included in the Mandate Query or Mandate Query Payment. 
      operationId: submitPayToQueryRequest
      parameters:
        - $ref: '#/components/parameters/correlationID'
        - $ref: '#/components/parameters/messageID'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestQueryNotification'
            examples:
              Mandate Query Case:
                value:
                  {
                    "case_id": "ANZAU230821-00002",
                    "investigation_type_code": "INV14",
                    "case_type": "Mandate Query Case",
                    "narrative": "/MandateID/247de1c0c3a911edafa10242ac120002//Reason/OAT 67/",
                    "mandate_details": {
                      "mps_user_id": "10002005",
                      "mandate_identification": "247de1c0c3a911edafa10242ac120002",
                      "establishment_scheme": "AUPM",
                      "mandate_purpose_code": "UTIL",
                      "description": "Gas Agreement",
                      "debtor_information": {
                        "party_name": "Andras Arato",
                        "account_identification_type_code": "BBAN",
                        "account_identification": "013010XXXXX8937",
                      },
                      "creditor_information": {
                        "party_reference": "REF123"
                      },
                      "payment_information": {
                        "payment_frequency": "MNTH",
                        "payment_amount_type": "VARI",
                        "maximum_amount": {
                          "currency": "AUD",
                          "amount": "1000.00"
                        }
                      },
                      "additional_information": "Additional Mandate Info"
                    }
                  }
              Mandate Query Payments:
                value:
                  {
                    "case_id": "ANZAU230821-00002",
                    "investigation_type_code": "INV14",
                    "case_type": "Mandate Query Payments",
                    "narrative": "/MandateID/247de1c0c3a911edafa10242ac120002//TransactionID/CUSCAU2SXXXN20230403000139150001900//Reason/OAT 67/",
                    "payment_details": {
                      "transaction_identification": "CUSCAU2SXXXN20230403000139150001900",
                      "instruction_identification": "ANZBAU3LXXXI20230621900000000011200",
                      "transaction_date": "2023-03-01",
                      "original_transaction_amount": {
                        "currency": "AUD",
                        "amount": "100.00"
                      }
                    },
                    "mandate_details": {
                      "mps_user_id": "10002005",
                      "mandate_identification": "247de1c0c3a911edafa10242ac120002",
                      "establishment_scheme": "AUPM",
                      "mandate_purpose_code": "UTIL",
                      "description": "Gas Agreement",
                      "debtor_information": {
                        "party_name": "Andras Arato",
                        "account_identification_type_code": "ALIA",
                        "account_alias_type_code": "EMAL",
                        "account_alias_identification": "andras.arato@gmail.com"
                      },
                      "payment_information": {
                        "payment_frequency": "MNTH",
                        "payment_amount_type": "VARI",
                        "maximum_amount": {
                          "currency": "AUD",
                          "amount": "1000.00"
                        }
                      },
                    }
                  }

        required: true
      responses:
        '201':
          $ref: '#/components/responses/201Created'
        '400':
          $ref: '#/components/responses/400BadRequest'
        '401':
          $ref: '#/components/responses/401Unauthorised'
        '403':
          $ref: '#/components/responses/403Forbidden'
        '429':
          $ref: '#/components/responses/429TooManyRequests'
        '500':
          $ref: '#/components/responses/500InternalError'
        '502':
          $ref: '#/components/responses/502BadGateway'
        '503':
          $ref: '#/components/responses/503Unavailable'
        '504':
          $ref: '#/components/responses/504Timeout'
        default:
          $ref: '#/components/responses/default'               
components:
  securitySchemes:
    apiKeyAuth:
      type: apiKey
      in: header
      name: apikey
      description: API key to authorise requests.
  parameters:
    correlationID:
      name: x-Correlation-Id
      in: header
      description: >-
        Optional correlation ID provided by the data consumer that should be
        reflected back in the response headers. Can be used for reporting and
        logging.
      schema:
        $ref: '#/components/schemas/UUID'
      example: 'baf7b2b0-449d-48c7-a63a-876e72cd7b02'
    messageID:
      name: x-Message-Id
      in: header
      description: >-
        Point to point reference, as assigned by the
        instructing party, and sent to the next party in the chain to
        unambiguously identify the message
      required: true
      schema:
        $ref: '#/components/schemas/UUID'
      example: '3c40b28a-b902-477f-8400-6cb97d41cb06'
  responses:
    201Created:
      description: Created, request was successful
      headers:
        x-Correlation-Id:
          description: GUID echoed from request. Example baf7b2b0-449d-48c7-a63a-876e72cd7b02
          schema:
            $ref: '#/components/schemas/UUID'
        x-RequestKey:
          description: Request Key provided to customer for support and reporting purposes. Example 7eda441d-5716-4f28-b5fe-d3dc7458d526
          schema:
            $ref: '#/components/schemas/UUID'
    400BadRequest:
      description: Bad Request, message format does not match expected schema
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorCode'
          example:
            status:
              code: EC000 _003
              severity: Fatal
              text: The request failed validation {reason}
    401Unauthorised:
      description: Request is not authenticated
      content: {}
    403Forbidden:
      description: Request is authenticated but action is not allowed 
      content: 
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorCode'
          example:
            status:
              code: EC013_003
              severity: Fatal
              text: The provided account_identification = 013999012345678 is not authorised to receive real time notifications. Provide an authorised account or please contact support
    429TooManyRequests:
      description: Action exceeds allocated limits
      content: {}
    500InternalError:
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorCode'
          example:
            status:
              code: EC000_001
              severity: Fatal
              text: Internal Server Error, please contact support
    502BadGateway:
      description: Bad Gateway, contact support
      content: {}
    503Unavailable:
      description: Service Unavailable or down for maintainance
      content: {}
    504Timeout:
      description: Gateway Timeout, retry or contact support
      content: {}
    default:
      description: Unexpected error
      content: {}
  schemas:
    ActiveCurrencyAndAmount:
      type: object
      description: A number of monetary units specified in an active currency where the unit of currency is explicit and compliant with ISO 4217.
      additionalProperties: false
      properties:
        currency:
          type: string
          description: A code allocated to a currency by a Maintenance Agency under an international identification scheme as described in the latest edition of the international standard ISO 4217 "Codes for the representation of currencies and funds".
          pattern: ^[A-Z]{3,3}$
          enum:
            - AUD
        amount:
          type: string
          maxLength: 19
          pattern: ^(0|[1-9][0-9]{0,15})\.\d{2}$
          example: "100.00"
      required: 
        - currency
        - amount    
    Frequency6Code:
      type: string
      description: |-
        Specifies the regularity of an event.
        <table><tr><th>Code</th><th>Name</th><th>Description</th></tr><tr><td>ADHO</td><td>Adhoc</td><td>Event takes place on request or as necessary.</td></tr><tr><td>DAIL</td><td>Daily</td><td>Event takes place every day.</td></tr><tr><td>FRTN</td><td>Fortnightly</td><td>Event takes place every two weeks.</td></tr><tr><td>INDA</td><td>IntraDay</td><td>Event takes place several times a day.</td></tr><tr><td>MIAN</td><td>SemiAnnual</td><td>Event takes place every six months or two times a year.</td></tr><tr><td>MNTH</td><td>Monthly</td><td>Event takes place every month or once a month.</td></tr><tr><td>QURT</td><td>Quarterly</td><td>Event takes place every three months or four times a year.</td></tr><tr><td>WEEK</td><td>Weekly</td><td>Event takes place once a week.</td></tr><tr><td>YEAR</td><td>Annual</td><td>Event takes place every year or once a year.</td></tr></table>
      enum:
      - YEAR
      - MNTH
      - QURT
      - MIAN
      - WEEK
      - DAIL
      - ADHO
      - INDA
      - FRTN
    MandateActionStatus1Code:
      type: string
      description: |-
        Enumeration of the states that a mandate action can have.
        <table><tr><th>Code</th><th>Name</th><th>Description</th></tr><tr><td>CMPL</td><td>Completed</td><td><p>This status represents the following situations:</p><ul><li>A bilateral action that has been confirmed.</li><li>A unilateral action has been performed.</li><li>A port that has been finalised.</li></ul></td></tr><tr><td>DECL</td><td>Declined</td><td>Action has been declined.</td></tr><tr><td>TIMO</td><td>TimedOut</td><td>Action was created bilaterally and has now timed out.</td></tr></table>
      enum:
      - CMPL
      - DECL
      - TIMO 
    MandateActionType1Code:
      type: string
      description: |-
        Enumeration of all mandate action types.
        <table><tr><th>Code</th><th>Name</th><th>Description</th></tr><tr><td>AMND</td><td>Amend</td><td>Mandate amendment.</td></tr><tr><td>CREA</td><td>Create</td><td>Mandate creation.</td></tr><tr><td>STCH</td><td>StatusChange</td><td>Mandate status change.</td></tr></table>
      enum:
      - AMND  
      - CREA
      - STCH
    MandatePartyInformation1Creditor:
      type: object
      description: "Information concerning the creditor party identified in the mandate."
      additionalProperties: false
      properties:
        party_reference:
          type: string
          description: |-
            Specifies underlying party reference associated with the mandate, for example Customer Reference, Customer Number, Membership Number, Subscription Number, or Name.
            Specifies a character string with a maximum length of 35 ASCII printable characters.
          pattern: ^[ -~]{1,35}$
    MandatePartyInformation1Debtor:
      type: object
      description: "Information concerning the debtor party identified in the mandate."
      additionalProperties: false
      properties:
        party_name:
          type: string
          description: |-
            Name by which the party is known and which is usually used to identify that party.
            Specifies a character string with a maximum length of 140 ASCII printable characters.
          pattern: ^[ -~]{1,140}$
        account_identification_type_code:
          type: string
          description: "Type of account identification, in a coded form.\nSpecifies an alphanumeric string with a length of 4 characters.<table><tr><th>Code</th><th>Description</th></tr><tr><td>ALIA</td><td>Alias (PayID)</td></tr><tr><td>BBAN</td><td>Australian Bank-State-Branch Code (BSB)</td></tr></table>"
          pattern: ^[a-zA-Z0-9]{4}$
          enum:
          - ALIA
          - BBAN
        account_identification:
          type: string
          description: "Unique and unambiguous identification of the account between the account owner and the account servicer. For example:\r\n   - Basic Bank Account Number - account number with BSB (Bank-State-Branch) prefix. \n\nSpecifies a character string with a maximum length of 34 ASCII printable characters. \n\nThe account number will be masked."
          pattern: ^[ -~]{1,34}$
          example: '013010XXXXX8937'
        account_alias_type_code:
          type: string
          description: "Name of the Alias Type, in a coded form.\nSpecifies an alphanumeric string with a length of 4 characters.<table><tr><th>Code</th><th>Description</th></tr><tr><td>AUBN</td><td>Australian Business Number</td></tr><tr><td>EMAL</td><td>Email address</td></tr><tr><td>ORGN</td><td>Organisation Identifier</td></tr><tr><td>TELI</td><td>Telephone Number</td></tr></table>"
          pattern: ^[a-zA-Z0-9]{4}$
          enum: 
          - AUBN
          - EMAL
          - ORGN
          - TELI
        account_alias_identification:
          type: string
          description: |-
            Identification used to indicate the account identification under another specified name.
            Specifies a character string with a maximum length of 2048 characters.
          minLength: 1
          maxLength: 2048
      required:
      - party_name
      - account_identification_type_code
    MandatePaymentInformation1:
      type: object
      description: "Set of characteristics detailing mandate payment information.\n  \n**Property descriptions**:\n - **payment_frequency** - Regularity with which instructions are to be created and processed.\n - **payment_amount_type** - Identifies the mandate payment arrangement.\n - **first_payment_amount** - Amount different from the payment amount, as it includes the costs associated with the first debited amount.\n - **last_payment_amount** - Last payment amount different  to the payment amount.\n - **amount** - Fixed amount to be debited from the debtor's account.\n - **maximum_amount** - Maximum amount that may be paid from the debtor's account, per instruction."
      additionalProperties: false
      properties:
        payment_frequency:
          $ref: '#/components/schemas/Frequency6Code'
        payment_execute_not_before_time:
          type: string
          description: |-
            Indicates that each execution of the mandate payment should not occur before a given time of that execution day.
            An ISO time whereby all timezoned time values are UTC.
          pattern: ^(?:[01]\d|2[0-3]):[0-5]\d:[0-5]\d(?:\.[0-9]{1,3})?(?:Z)|(-)$
        count_per_period:
          type: string
          pattern: ^(?=.{1,19}$)[0-9]{0,19}(?:\.[0-9]{0,18})?$
          description: Qualifies the frequency in terms of the number of instructions to be created and processed during the specified period.
        point_in_time:
          type: string
          description: |-
            Qualifies the frequency in terms of an exact point in time or moment within the specified period.
            Specifies a numeric string with an exact length of 2 digits.
          pattern: ^[0-9]{2}$
        payment_amount_type:
          $ref: '#/components/schemas/MandatePaymentType1Code'
        first_payment_amount:
          $ref: '#/components/schemas/ActiveCurrencyAndAmount'
        last_payment_amount:
          $ref: '#/components/schemas/ActiveCurrencyAndAmount'
        amount:
          $ref: '#/components/schemas/ActiveCurrencyAndAmount'
        maximum_amount:
          $ref: '#/components/schemas/ActiveCurrencyAndAmount'
      required:
      - payment_frequency
      - payment_amount_type
    MandatePaymentType1Code:
      type: string
      description: |-
        Identifies the mandate payment arrangement.
        <table><tr><th>Code</th><th>Name</th><th>Description</th></tr><tr><td>BALN</td><td>Balloon</td><td>Payment amount is fixed with large final payment amount.</td></tr><tr><td>FIXE</td><td>Fixed</td><td>Payment amount is fixed.</td></tr><tr><td>USGB</td><td>UsageBased</td><td>Payment amount is based on usage.</td></tr><tr><td>VARI</td><td>Variable</td><td>Payment amount is variable.</td></tr></table>
      enum:
      - BALN
      - FIXE
      - USGB
      - VARI    
    MandateStatus1Code:
      type: string
      description: |-
        Enumeration of the states that a mandate can have.
        <table><tr><th>Code</th><th>Name</th><th>Description</th></tr><tr><td>ACTV</td><td>Active</td><td>The mandate has a status of active.</td></tr><tr><td>CNCD</td><td>Cancelled</td><td>The mandate has a status of cancelled.</td></tr><tr><td>SUSD</td><td>Suspended</td><td>The mandate has a status of suspended.</td></tr></table>
      enum:
      - ACTV
      - CNCD
      - SUSD
    MandateStatusChange1Code:
      type: string
      description: |-
        Enumeration of possible status changes.
        <table><tr><th>Code</th><th>Name</th><th>Description</th></tr><tr><td>CNCL</td><td>Cancel</td><td>Cancel a mandate.</td></tr><tr><td>RELS</td><td>Release</td><td>Unsuspend a suspended mandate.</td></tr><tr><td>SUSP</td><td>Suspend</td><td>Suspend an active mandate.</td></tr></table>
      enum:
      - CNCL
      - RELS
      - SUSP  
    MandateStatusChangeDetails1:
      type: object
      description: "Request to change the status of a mandate."
      additionalProperties: false
      properties:
        change:
          $ref: '#/components/schemas/MandateStatusChange1Code'
        reason_code:
          type: string
          description: |-
            Code defining the reason for the status change to the mandate.
            Specifies an alphanumeric string with a length of 4 characters.
          pattern: ^[a-zA-Z0-9]{4}$
          example: MD16
        reason_description:
          type: string
          description: |-
            Description of the change reason.
            Specifies a character string with a maximum length of 256 characters.
          minLength: 1
          maxLength: 256
          example: RequestedByCustomer
      required:
      - change
    NotificationTrigger1Code:
      type: string
      description: |-
        Defines events that trigger a notification.
        <table><tr><th>Code</th><th>Name</th><th>Description</th></tr><tr><td>MAMN</td><td>MandateAmended</td><td>Sent to the counterparty of a unilateral mandate amendment to indicate that action has occurred.</td></tr><tr><td>MCRC</td><td>MandateCreateConfirmed</td><td>Sent to the initiator of a bilateral mandate creation to indicate that the counterparty has confirmed the action.</td></tr><tr><td>MCRD</td><td>MandateCreateDeclined</td><td>Sent to the initiator of a bilateral mandate creation to indicate that the counterparty has declined the action.</td></tr><tr><td>MCRX</td><td>MandateCreateExpired</td><td>Sent to the initiator of a mandate creation action once its expiry time has been reached and the status of the action is set to Timed Out (TIMO). For a bilateral creation action, this notification is also sent to the servicer of the Debtor Account.</td></tr><tr><td>MSCH</td><td>MandateStatusChanged</td><td>Sent to the counterparty of a unilateral mandate status change to indicate that action has occurred.</td></tr></table>
      enum:
      - MAMN   
      - MCRC
      - MCRD
      - MCRX
      - MSCH   
    QueryMandateDetails:
      type: object
      description: |-
        Key Mandate details for the referenced Mandate Id in the PayTo Query.
      additionalProperties: false
      properties:
        mps_user_id:
          type: string
          description: |-
            MPS User Id which is associated with the Mandate
          minLength: 1
          maxLength: 10  
          example: '10002005'
        mandate_identification:
          type: string
          description: "Unique ID, as assigned by the MMS, to unambiguously identify the mandate. This ID must be used to identify the mandate for all further operations on the mandate.\nUniversally Unique IDentifier (UUID) version 1, as described in IETC RFC 4122 \"Universally Unique IDentifier (UUID) URN Namespace\" without the 4 hyphen separators.\r\nFor example: '00000000000010008000000000000000' instead of  '00000000-0000-1000-8000-000000000000' (without quotes)"
          pattern: ^[a-f0-9]{12}1[a-f0-9]{3}[89ab][a-f0-9]{15}$
          example: 247de1c0c3a911edafa10242ac120002
        establishment_scheme:
          type: string
          description: |-
            Identifies the arrangement (unilateral or bilateral) and party that established the mandate.
            <table><tr><th>Code</th><th>Name</th><th>Description</th></tr><tr><td>AUPM</td><td>AuthorisedPaymentMandate</td><td>Established bilaterally as Authorised Payment Mandate.</td></tr><tr><td>MGCR</td><td>MigratedByCreditor</td><td>Established by migration from legacy service by Creditor.</td></tr></table>
          enum:
          - AUPM
#          - MGCR
        mandate_purpose_code:
          type: string
          description: |-
            Specifies the high level purpose of the mandate based on a set of pre-defined categories.
            Specifies an alphanumeric string with a length of 4 characters.
            <table><tr><th>Code</th><th>Description</th></tr><tr><td>DEPD</td><td>Dependant Support Payments</td></tr><tr><td>GAMP</td><td>Gambling Payments</td></tr><tr><td>GOVT</td><td>Government Payments</td></tr><tr><td>LOAN</td><td>Loan Payments</td></tr><tr><td>MORT</td><td>Mortgage Payments</td></tr><tr><td>OTHR</td><td>Other Service Payments</td></tr><tr><td>PENS</td><td>Pension Payments</td></tr><tr><td>PERS</td><td>Personal Payment</td></tr><tr><td>RETL</td><td>Retail Payments</td></tr><tr><td>SALA</td><td>Salary Payments</td></tr><tr><td>TAXS</td><td>Tax Payments</td></tr><tr><td>UTIL</td><td>Utility Payments</td></tr></table>   
          pattern: ^[a-zA-Z0-9]{4}$
          enum: 
          - DEPD
          - GAMP
          - GOVT
          - LOAN
          - MORT
          - OTHR
          - PENS
          - PERS
          - RETL
          - SALA
          - TAXS
          - UTIL
        description:
          type: string
          description: |-
            Reason for the mandate setup as narrative text.
            Specifies a character string with a maximum length of 140 ASCII printable characters.
          pattern: ^[ -~]{1,140}$
        debtor_information:
          $ref: '#/components/schemas/MandatePartyInformation1Debtor'
        creditor_information:
          $ref: '#/components/schemas/MandatePartyInformation1Creditor'
        payment_information:
          $ref: '#/components/schemas/MandatePaymentInformation1'
        additional_information:
          type: string
          description: |-
            Additional information, in free text form, to complement the mandate information.
            Specifies a character string with a maximum length of 140 characters.
          minLength: 1
          maxLength: 140
      required:
      - mps_user_id
      - mandate_identification
      - establishment_scheme
      - mandate_purpose_code
      - description
      - debtor_information
      - payment_information
    RequestMandateNotification:
      type: object
      description: |-
        Request a Mandate Notification to simulate a **non-Payee** action on a mandate.      
      additionalProperties: false
      properties:
        mps_user_id:
          type: string
          description: |-
            MPS User Id which is associated with the mandate request
          minLength: 1
          maxLength: 10   
          example: 10002005 
        trigger:
          $ref: '#/components/schemas/NotificationTrigger1Code'
        mandate_identification:
          type: string
          description: "Unique ID, as assigned by the MMS, to unambiguously identify the mandate. This ID must be used to identify the mandate for all further operations on the mandate.\nUniversally Unique IDentifier (UUID) version 1, as described in IETC RFC 4122 \"Universally Unique IDentifier (UUID) URN Namespace\" without the 4 hyphen separators.\r\nFor example: '00000000000010008000000000000000' instead of  '00000000-0000-1000-8000-000000000000' (without quotes)"
          pattern: ^[a-f0-9]{12}1[a-f0-9]{3}[89ab][a-f0-9]{15}$
          example: 247de1c0c3a911edafa10242ac120002
        mandate_status:
          $ref: '#/components/schemas/MandateStatus1Code'
        action_identification:
          type: string
          description: "Unique ID assigned to the mandate request action. This ID is used to uniquely identify the action for all further operations on a mandate action.\nUniversally Unique IDentifier (UUID) version 1, as described in IETC RFC 4122 \"Universally Unique IDentifier (UUID) URN Namespace\" without the 4 hyphen separators.\r\nFor example: '00000000000010008000000000000000' instead of  '00000000-0000-1000-8000-000000000000' (without quotes)"
          pattern: ^[a-f0-9]{12}1[a-f0-9]{3}[89ab][a-f0-9]{15}$
          example: 85f28334c3a911edafa10242ac120002
        action_type:
          $ref: '#/components/schemas/MandateActionType1Code'
        action_status:
          $ref: '#/components/schemas/MandateActionStatus1Code'
        details:
          type: object
          description: "Details of an action performed on a mandate by the **Payer** i.e. unilateral changes or MMS in case of mandate timeout. Depending on the type of action, only one of the following objects will be present: StatusChange.\n  \n**Property descriptions**:\n - **status_change** - Mandate status change details provided in the request."
          additionalProperties: false
          properties:
            status_change:
              $ref: '#/components/schemas/MandateStatusChangeDetails1'  
      required:
      - mps_user_id 
      - trigger
      - mandate_identification
      - mandate_status
      - action_identification
      - action_type
      - action_status
    RequestQueryNotification:
      type: object
      description: |-
        Request a PayTo Query Notification to simulate a **Payee** query on a mandate or mandated payment.      
      additionalProperties: false
      properties:
        case_id:
          type: string
          description: |-
            Case Identifier. A unique case reference as assigned by ANZ. To be referenced when providing a Query Resolution.   
          minLength: 1
          maxLength: 20  
          example: ANZAU230821-00002
        investigation_type_code:
          type: string
          description: |-
            Investigation Type Code.
            <table><tr><th>Code</th><th>Name</th></tr><tr><td>INV14</td><td>Mandate Query</td></tr></table>
          enum:
            - INV14
        case_type:
          type: string
          description: |-
            Case Type.
            <table><tr><th>Name</th><th>Description</th></tr><tr><td>Mandate Query Case</td><td>A query about a mandate.</td></tr><tr><td>Mandate Query Payments</td><td>A query about a mandated payment.</td></tr></table>
          enum:
            - Mandate Query Case
            - Mandate Query Payments
        reminder_count:
          type: string
          description: |-
            Reminder Count. Will be incremented by 1 each time ANZ generates the same PayTo query notiication where no Query Resolution has been received.   
          minLength: 1
          maxLength: 2  
          example: 1
        re_open_case_indication:
          type: boolean
          description: |-
            Re-opened Case Indicator. Where ANZ re-opens a previously closed case this flag will be set to true.    
        narrative:
          type: string
          description: |-
            Narrative as sent by Payer's OFI.   
          minLength: 1
          maxLength: 2048  
          example: /MandateID/20a73840a79c11eda83b9b809f5abcbe//Reason/OAT 67/
        payment_details:
          type: object
          description: >-
            Key elements used to identify the original transaction that is being referred to.
          properties: 
            transaction_identification:
              type: string
              description: >-
                Unique reference, as assigned by the Payer's OFI, to unambiguously identify the transaction.
              minLength: 1
              maxLength: 35
              example: CUSCAU2SXXXN20230403000139150001900
            instruction_identification:
              type: string
              description: >-
                Unique reference, as assigned by ANZ, to unambiguously identify the instruction. Note this is not the Payee's Instruction Identification
              minLength: 1
              maxLength: 35
              example: ANZBAU3LXXXI20230621900000000011200
            transaction_date:
              type: string
              description: |-
                Transaction Date.
                A particular point in the progression of time in a calendar year expressed in the YYYY-MM-DD format. This representation is defined in "XML Schema Part 2: Datatypes Second Edition - W3C Recommendation 28 October 2004" which is aligned with ISO 8601.
              pattern: ^(?:[1-9]\d{3}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1\d|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[1-9]\d(?:0[48]|[2468][048]|[13579][26])|(?:[2468][048]|[13579][26])00)-02-29)$
              example: "2023-03-01"
            original_transaction_amount:
              $ref: '#/components/schemas/ActiveCurrencyAndAmount'
          required:
            - transaction_identification
            - instruction_identification
            - transaction_date
            - original_transaction_amount        
        mandate_details:
          $ref: '#/components/schemas/QueryMandateDetails'
      required:
        - creation_date_time
        - case_id
        - investigation_type_code
        - case_type
        - narrative
        - mandate_details  
    RequestRTN:
      required:
      - account_identification
      - entry_reference
      - amount
      type: object
      properties:
        account_identification:
          type: string
          description: Account identification assigned by an institution, includes BSB
          minLength: 1
          maxLength: 34
          example: '014814800000010'
        entry_reference:
          type: string
          minLength: 1
          maxLength: 35
          description: Unique reference for the entry
          example: Reference entered in the initiating channel     
        amount:
          type: string
          description: Notified amount in AUD
          minLength: 1
          maxLength: 19
          example: 7120.86
        puid:
          type: string
          minLength: 1
          maxLength: 16
          description: An optionally provided identifier which is returned in the requested RTN
          example: "PTM2022101389715"
        debtor_name:
          type: string
          minLength: 1
          maxLength: 140  
          description: Debtor (payer) account name 
          example: Andras Arato
        creditor_name:
          type: string
          minLength: 1
          maxLength: 140  
          description: Creditor (payee) account name 
          example: Holden Holdings
        arm_creditor_account_identification:
          type: string
          description: ARM (virtual) account identification, includes BSB
          minLength: 1
          maxLength: 34
          example: '063678965323010'
        creditor_alias:
          required:
          - type
          - identification
          type: object
          description: Creditor account alias
          properties:
            type:
              type: string
              enum:
                - 'TELI'
                - 'EMAL'
                - 'AUBN'
                - 'ORGN'
              description: Creditor account alias type
              example: 'TELI'
            identification:
              type: string
              description: Creditor account alias identification
              minLength: 1
              maxLength: 2048
              example: '+61403736550'
        remittance_information:
          type: object
          properties:
            unstructured:
              type: array
              description: >-
                Information supplied to enable the matching/reconciliation of an entry 
                with the items that the payment is intended to settle, such as commercial 
                invoices in an accounts receivable system, in an unstructured form.
              example: ['👨‍👩‍👧‍👦Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim a','d minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit i']
              items:
                type: string
                minLength: 1
                maxLength: 140
              minItems: 1
              maxItems: 2
        return_information:
          required:
          - reason_code
          type: object
          properties:
            reason_code:
              type: string
              description: Payment return reason code
              minLength: 4
              maxLength: 4
              example: NARR   
            additional_information:
              type: array
              description: Further details on the return reason  
              example: ['Beneficiary is','unknown']
              items:
                type: string
                minLength: 1
                maxLength: 105
              minItems: 1
              maxItems: 3         
    UUID:
      type: string
      pattern: '[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}'
    ErrorCode:
      type: object
      properties: 
        status:
          type: object
          required:
          - code
          - severity
          - text
          properties:
            code:
              type: string
              example: EC000_001
            severity: 
              type: string
              enum:
                - Fatal
                - Transient
              example: Fatal
            text:
              type: string
              example: Internal Server Error, please contact support   
tags:
  - name: Receivables
    description: Operations related to receivables. 
  - name: RequestRTN
    description: <SchemaDefinition schemaRef="#/components/schemas/RequestRTN" />
    x-displayName: RequestRTN
  - name: PayTo Payee
    description: Operations related to PayTo Payee. 
  - name: RequestMandateNotification
    description: <SchemaDefinition schemaRef="#/components/schemas/RequestMandateNotification" />
  - name: RequestQueryNotification
    description: <SchemaDefinition schemaRef="#/components/schemas/RequestQueryNotification" />
x-tagGroups:
  - name: Paths
    tags: 
      - Receivables
      - PayTo Payee
  - name: Models
    tags: 
      - RequestRTN
      - RequestMandateNotification
      - RequestQueryNotification